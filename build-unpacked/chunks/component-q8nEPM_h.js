import{r as n,j as e,X as m,L as h}from"./workflowEngine-COE-Vt9W.js";import{E as g,H as d,P as p}from"./index-DVV3DQzl.js";import{M as y}from"./message-square-J-1xB5Ws.js";const b={blue:{bg:"#E3F2FD",border:"#5B9BD5"},purple:{bg:"#F3E5F5",border:"#9B59B6"},mint:{bg:"#E0F2F1",border:"#4DB6AC"},pink:{bg:"#FCE4EC",border:"#EC407A"},peach:{bg:"#FFE0B2",border:"#FF8A65"},sage:{bg:"#E8F5E9",border:"#66BB6A"},yellow:{bg:"#FFF9C4",border:"#FDD835"}},f={input:"blue",processing:"purple",output:"sage"},j=o=>{if(!o)return b.purple;const t=f[o]||"purple";return b[t]},C=({data:o,selected:t})=>{const[r,i]=n.useState("checking"),[a,u]=n.useState(o.prompt||"");n.useEffect(()=>{o.prompt=a},[a,o]),n.useEffect(()=>{(async()=>{try{if(!window.LanguageModel){i("unavailable");return}const x=await window.LanguageModel.availability();i(x)}catch{i("unavailable")}})()},[]);const c=o.status==="running",s=j(o.category);return e.jsxs("div",{className:`sketch-node relative w-[300px] ${c?"sketch-node-running-flow":""} ${t?"sketch-node-selected":""}`,children:[t&&o.onDelete&&e.jsx("button",{onClick:l=>{l.stopPropagation(),o.onDelete?.(o.id)},className:"absolute -top-3 -right-3 flex items-center justify-center hover:scale-110 transition-all cursor-pointer w-7 h-7 rounded-full z-20 shadow-md",style:{backgroundColor:s.bg,color:s.border,border:`3px solid ${s.border}`,filter:"url(#rough-border)"},title:"Delete node (or press Delete/Backspace)",children:e.jsx(m,{size:14,strokeWidth:2.5})}),e.jsx("div",{className:"sketch-border",style:{"--sketch-color":s.border},children:e.jsx("div",{className:"sketch-border-inner",children:e.jsxs("div",{className:"sketch-border-content",children:[e.jsxs("div",{className:"px-4 py-3 font-bold text-base tracking-tight flex items-center justify-between gap-2",style:{backgroundColor:s.bg},children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[c?e.jsx(h,{size:18,className:"animate-spin shrink-0",style:{color:s.border}}):e.jsx(y,{size:18,className:"shrink-0 opacity-90",style:{color:s.border}}),e.jsx("span",{className:"sketch-text text-[17px] leading-tight",style:{color:s.border},children:"Prompt"})]}),e.jsx("div",{className:"flex items-center gap-1.5",children:o.output&&e.jsx("button",{onClick:()=>o.onInspect?.(o.id,o.output),className:"cursor-pointer hover:scale-125 transition-transform opacity-90 hover:opacity-100 shrink-0",style:{color:s.border},title:"Inspect output",children:e.jsx(g,{size:18,style:{color:s.border}})})})]}),e.jsxs("div",{className:"px-4 py-3 space-y-3 bg-white sketch-info-text",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 sketch-info-text text-sm font-medium",children:["Custom Prompt",o.status==="done"&&e.jsx("span",{className:"ml-2 text-[#52B788] text-sm",children:"‚úì Edit & re-run"})]}),e.jsx("div",{className:"sketch-border",style:{"--sketch-color":s.border},children:e.jsx("div",{className:"sketch-border-inner",children:e.jsx("textarea",{value:a,onChange:l=>u(l.target.value),disabled:c,className:"nowheel w-full py-1.5 px-3 resize-none disabled:opacity-50 disabled:cursor-not-allowed bg-transparent border-0 outline-none focus:outline-none focus:ring-0 focus:border-transparent appearance-none font-sans text-[14px]",style:{backgroundColor:"transparent",lineHeight:"1.5",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif"},rows:3,placeholder:"Enter your instruction..."})})})]}),r==="unavailable"&&e.jsx("div",{className:"text-[#E09F7D] text-[15px] font-semibold",children:"‚ö†Ô∏è Prompt API not available"}),r==="downloadable"&&e.jsx("div",{className:"text-[#5B9BD5] text-[15px] font-semibold",children:"üì• Model available"}),r==="downloading"&&e.jsx("div",{className:"text-[#5B9BD5] text-[15px] font-semibold",children:"‚è≥ Downloading model..."}),r==="ready"&&e.jsx("div",{className:"text-[#52B788] text-[15px] font-semibold",children:"‚úÖ Model ready"})]})]})})}),o.category!=="input"&&e.jsx(d,{type:"target",position:p.Top,style:{borderColor:s.border,"--handle-color":s.border}}),o.category!=="output"&&e.jsx(d,{type:"source",position:p.Bottom,style:{borderColor:s.border,"--handle-color":s.border}})]})};export{C as PromptNodeComponent};
